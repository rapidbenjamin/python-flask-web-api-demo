{% extends "base.html" %}
{% block content %}

    <h3>Groups</h3>
    <h5 class="text-right"><a href="/groups/new"><span class="glyphicon glyphicon-plus"></span> New</a></h4>
    <hr/>



    <table class="table table-striped table-bordered table-hover">
        <thead>
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Description</th>
            <th>Users count</th>
            <th>Created Date</th>
            <th colspan="2">Actions</th>
        </tr>
        </thead>
        {% if list_groups.items %}
            {% for group in list_groups.items %}
                <tr>
                    <td><a href="{{ url_for('groups_page.show', id = group.id) }}" >{{ group.id }}</a></td>
                    <td><a href="{{ url_for('groups_page.show', id = group.id) }}" >{{ group.title }}</a></td>
                    <td>{{ group.description }}</td>
                    <td>
                        {% if group.users %}
                            {{ group.users.count() }}
                        {% else %}
                            0
                        {% endif %}
                    </td>
                    <td>{{ group.added_time.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    <td><a href="{{ url_for('groups_page.edit', id = group.id) }}" ><i class="glyphicon glyphicon-pencil"></i> edit</a></td>
                    <td><a href="{{ url_for('groups_page.delete', id = group.id) }}" ><i class="glyphicon glyphicon-trash"></i> delete</a></td>

                </tr>
            {% endfor %}
        {% else %}
          <tr style="text-align: center">
              <td colspan="6">
            <h4> No groups have been added. </h4>
            </td>
         </tr>
        {% endif %}
    </table>

    <ul class="pagination">
        {%- for page in list_groups.iter_pages() %}
            {% if page %}
                {% if page != list_groups.page %}
                    <li><a href="{{ url_for('groups_page.groups', page = page) }}">{{ page }}</a></li>
                {% else %}
                    <li class="active"><a href="#"><strong>{{ page }}</strong></a></li>
                {% endif %}
            {% else %}
                <li><span class=ellipsis>â€¦</span></li>
            {% endif %}
        {%- endfor %}
    </ul>


{% endblock content %}
